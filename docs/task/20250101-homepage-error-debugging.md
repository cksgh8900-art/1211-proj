# 홈화면 데이터 로드 에러 디버깅 개선

## 작업 일시
2025-01-01

## 문제 상황
홈화면에서 "데이터를 불러올 수 없습니다" 에러가 발생

## 개선 내용

### 1. 에러 처리 개선
**파일**: `app/page.tsx`

- `TourListData` 함수의 에러 처리 개선
- API 키 관련 에러를 구체적으로 감지하여 사용자에게 명확한 메시지 표시
- 서버 사이드 에러 로깅 추가

**개선 사항**:
- API 키 미설정 에러: "API 키가 설정되지 않았습니다. NEXT_PUBLIC_TOUR_API_KEY 환경변수를 확인해주세요."
- API 인증키 오류: "API 인증키 오류입니다. 발급받은 API 키가 올바른지 확인해주세요."
- 기타 에러: 원본 에러 메시지 표시

### 2. 지역 코드 로드 에러 로깅 추가
**파일**: `app/page.tsx`

- `AreaCodesData` 함수에 에러 로깅 추가
- 지역 목록 로드 실패 시에도 필터는 작동하도록 유지

### 3. API 키 디버깅 정보 추가
**파일**: `lib/api/tour-api.ts`

- 개발 환경에서 API 키 상태를 콘솔에 출력
- `NEXT_PUBLIC_TOUR_API_KEY`와 `TOUR_API_KEY` 설정 여부 확인 가능

## 디버깅 방법

### 1. 개발 서버 재시작 확인
환경변수 변경 후 반드시 개발 서버를 재시작해야 합니다:
```bash
# 개발 서버 중지 (Ctrl+C)
# 개발 서버 재시작
pnpm dev
```

### 2. 서버 콘솔 확인
개발 서버 콘솔에서 다음 정보를 확인:
- "API 키 확인:" 메시지와 함께 환경변수 설정 상태
- "관광지 목록 로드 실패:" 또는 "지역 코드 로드 실패:" 에러 메시지

### 3. 환경변수 확인
`.env` 또는 `.env.local` 파일에 다음이 설정되어 있는지 확인:
```bash
NEXT_PUBLIC_TOUR_API_KEY=your_api_key_here
```

### 4. 브라우저 콘솔 확인
브라우저 개발자 도구 콘솔에서 에러 메시지 확인

## 가능한 원인 및 해결 방법

### 원인 1: 환경변수 미설정
**증상**: "API 키가 설정되지 않았습니다" 에러
**해결**: `.env` 파일에 `NEXT_PUBLIC_TOUR_API_KEY` 설정 후 서버 재시작

### 원인 2: 잘못된 API 키
**증상**: "API 인증키 오류입니다" 또는 "0002" 에러 코드
**해결**: 공공데이터포털에서 발급받은 올바른 API 키 확인

### 원인 3: 서버 재시작 안 함
**증상**: 환경변수를 설정했지만 여전히 에러 발생
**해결**: 개발 서버를 완전히 중지하고 재시작

### 원인 4: 네트워크 문제
**증상**: 타임아웃 에러 또는 네트워크 연결 오류
**해결**: 인터넷 연결 확인, 방화벽 설정 확인

## 수정 파일
- `app/page.tsx` (에러 처리 개선)
- `lib/api/tour-api.ts` (디버깅 정보 추가)

## 검증
- ✅ 에러 메시지 개선 확인
- ✅ 서버 사이드 로깅 추가 확인
- ✅ API 키 디버깅 정보 추가 확인
- ✅ 린터 오류 없음

